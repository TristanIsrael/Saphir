# Contributor:
# Maintainer: Tristan IsraÃ«l <tristan.israel@icloud.com>
pkgname=saphir-lib
pkgver=1.0
pkgrel=0
pkgdesc="Saphir - Library"
url="https://defense.gouv.fr/"
arch="noarch"
license="MIT"
depends="psec-lib"
makedepends="py3-installer"
checkdepends=""
install=""
subpackages=""
replaces=""
builddir="$srcdir/"
options="!check"  # no tests provided
giturl="https://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@github.com/TristanIsrael/saphir"
source=""

prepare() {
    mkdir -p "$builddir"
    cd "$builddir"
    git clone "$giturl" "$pkgname"
}

build() {
    cd "$builddir/$pkgname"/python/libsaphir
    python3 -m build
}

package() {
    cd "$builddir/$pkgname"/python/libsaphir/dist
    python3 -m installer --destdir=$pkgdir "libspahir-$pkgver-py3-none-any.whl"
}
