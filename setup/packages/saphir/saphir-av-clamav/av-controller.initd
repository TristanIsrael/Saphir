#!/sbin/openrc-run

name="av-controller"
command_background="yes"

depend() {    
    after *
}

start() {
    ebegin "Starting Saphir ClamAV controller"

    start-stop-daemon --start --make-pidfile --exec /usr/bin/python3 --pidfile /var/run/$name.pid --background -- /usr/lib/saphir/bin/av-controller.py
}

stop() {
    ebegin "Stopping Saphir ClamAV controller"
    
    kill -9 $(cat /var/run/$name.pid)

    eend $?
}